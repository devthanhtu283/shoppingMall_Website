<div class="single-product section">
  <div class="container">
    <div class="row">
      <div class="col-8">
        <div class="row">
          <div class="col-lg-5">
            <div class="left-image" style="border: 1px solid #eee">
              <img src="{{ showDetail.movie.photo }}" alt="" />
            </div>
          </div>
          <div class="col-lg-7 align-self-center">
            <div>
              <h4>{{ showDetail.movie.name }}</h4>
              <span style="font-size: 20px"
                >{{ showDetail.price }}$ / ticket</span
              >
              <p>{{ showDetail.movie.description }}</p>

              <ul>
                <li>
                  <span>Language:</span>
                  <span style="color: #333; text-transform: capitalize">{{
                    showDetail.movie.language
                  }}</span>
                </li>
                <li>
                  <span>Genre:</span>
                  <span style="color: #333; text-transform: capitalize">{{
                    showDetail.movie.genre
                  }}</span>
                </li>
                <li>
                  <span>Time Last:</span>
                  <span style="color: #333">{{
                    showDetail.movie.timeLast
                  }}</span>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
      <div class="col-4">
        <form
          method="post"
          [formGroup]="BuyTicketForm"
          (ngSubmit)="handleBuyTicket()"
          style="width: 100%"
        >
          <div
            class="surface-card p-4 shadow-2 border-round w-full"
            style="border: 1px solid #eee; border-radius: 6px"
          >
            <div class="text-center mb-5">
              <div
                class="d-flex align-items-center justify-content-center mx-auto"
              >
                <h4 class="m-0" style="color: #b31e8d; padding: 20px 0">
                  <i class="fa fa-store me-3" style="color: #b31e8d"></i>ABCD
                  MALL
                </h4>
              </div>
              <div
                class="text-900 text-3xl font-medium mb-3"
                style="font-size: 14px"
              >
                Hope you have a good time at our cinema
              </div>
            </div>

            <div>
              <div
                style="
                  display: flex;
                  flex-direction: column;
                  margin-bottom: 20px;
                "
              >
                <label
                  for="NameCustomer"
                  class="block text-900 font-medium mb-2"
                  >Full Name:</label
                >
                <input
                  id="NameCustomer"
                  type="text"
                  placeholder="John Smith"
                  pInputText
                  class="w-full"
                  style="width: 100%; text-align: left; border-radius: 4px"
                  formControlName="NameCustomer"
                />
              </div>
              <div
                style="
                  display: flex;
                  flex-direction: column;
                  margin-bottom: 20px;
                "
              >
                <label
                  for="PhoneCustomer"
                  class="block text-900 font-medium mb-2"
                  >Phone:</label
                >
                <input
                  id="PhoneCustomer"
                  type="text"
                  placeholder="+123 456 789"
                  pInputText
                  class="w-full"
                  style="width: 100%; text-align: left; border-radius: 4px"
                  formControlName="PhoneCustomer"
                />
              </div>

              <div
                style="
                  display: flex;
                  flex-direction: column;
                  margin-bottom: 20px;
                "
              >
                <label class="block text-900 font-medium mb-2"
                  >Seat Booked:</label
                >
                <input
                  type="text"
                  [placeholder]="dynamicSeatPlaceholder"
                  pInputText
                  class="w-full"
                  disabled
                  style="width: 100%; text-align: left; border-radius: 4px"
                />
              </div>

              <div style="width: 100%">
                <button
                  pButton
                  pRipple
                  label="Submit"
                  class="w-full"
                  style="
                    width: 100%;
                    background: #b31e8d;
                    border: 1px solid #b31e8d;
                    border-radius: 4px;
                  "
                ></button>
              </div>
            </div>
          </div>
        </form>
      </div>
      <div class="col-lg-12">
        <div class="sep"></div>
      </div>
    </div>
    <div class="row">
      <div class="col-12">
        <div
          style="
            width: 100%;
            text-align: center;
            text-transform: uppercase;
            margin-bottom: 20px;
            color: #333;
          "
        >
          <h5>Screen</h5>
        </div>
        <div
          style="
            width: 100%;
            height: 30px;
            clip-path: polygon(
              0% 44%,
              6% 36%,
              15% 28%,
              22% 22%,
              32% 15%,
              42% 11%,
              52% 8%,
              64% 11%,
              75% 14%,
              83% 19%,
              90% 26%,
              94% 31%,
              100% 42%,
              87% 35%,
              81% 31%,
              76% 25%,
              70% 22%,
              62% 19%,
              54% 16%,
              45% 17%,
              38% 21%,
              28% 27%,
              20% 31%,
              13% 36%,
              8% 41%
            );
            background: #333;
            margin: 0 auto;
          "
        >
          Screen
        </div>
        <div
          [style.width]="widthGrid"
          style="
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            margin: 0 auto;
          "
        >
          <ng-container *ngFor="let st of showDetail.seatStatues">
            <div
              style="
                width: 30px;
                height: 30px;
                line-height: 30px;
                text-align: center;
                border-radius: 4px;
                border: 1px solid #aaa;
                margin: 4px;
                position: relative;
              "
              [style.border-color]="
                !st.seat.status ? '#aaa' : st.status ? '#60e360' : '#e33333 '
              "
              [style.background]="st.seat.status ? '' : '#aaa'"
              [style.color]="st.seat.status ? '#333' : '#fff'"
            >
              <!-- {{ st.seat.status ? st.seat.name : "X" }} -->
              <span
                *ngIf="st.seat.status; else xLabel"
                style="
                  position: absolute;
                  top: 0;
                  left: 0;
                  bottom: 0;
                  right: 0;
                  border: 1px solid;
                  border-radius: 4px;
                "
                [style.background]="
                  selectedSeatStatusesId.includes(st.id.toString())
                    ? '#b31e8d'
                    : ''
                "
                [style.color]="
                  selectedSeatStatusesId.includes(st.id.toString())
                    ? '#fff'
                    : '#333'
                "
                [style.border-color]="
                  selectedSeatStatusesId.includes(st.id.toString())
                    ? '#b31e8d'
                    : 'transparent'
                "
                >{{ st.seat.name }}</span
              >
              <ng-template
                #xLabel
                style="position: absolute; top: 0; left: 0; bottom: 0; right: 0"
                >X</ng-template
              >
              <input
                type="checkbox"
                name="{{ st.seat.id }}"
                id="{{ st.seat.id }}"
                style="
                  position: absolute;
                  top: 0;
                  left: 0;
                  bottom: 0;
                  right: 0;
                  opacity: 0;
                "
                [style.cursor]="
                  !st.seat.status
                    ? 'not-allowed'
                    : st.status
                    ? 'pointer'
                    : 'not-allowed'
                "
                [disabled]="!st.seat.status ? true : st.status ? false : true"
                [ngModel]="selectedSeatNames.includes(st.seat.name.toString())"
                (change)="toggleSeatNames(st.seat.name.toString())"
                [ngModel]="selectedSeatStatusesId.includes(st.id.toString())"
                (change)="toggleSeatStatusesId(st.id.toString())"
              />
            </div>
          </ng-container>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-12">
        <div style="margin: 100px 0 20px 0">
          <h6 style="color: #333">Seat Note:</h6>
        </div>
        <div
          style="
            display: flex;
            align-items: center;
            width: 276px;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 100px;
          "
        >
          <div
            style="
              display: flex;
              justify-content: center;
              align-items: center;
              margin-right: 30px;
            "
          >
            <div
              style="
                width: 30px;
                height: 30px;
                line-height: 30px;
                text-align: center;
                border-radius: 4px;
                border: 1px solid #aaa;
                margin: 4px;
                background: #aaa;
                color: #fff;
              "
            >
              X
            </div>
            <p style="margin: 0">: Broken</p>
          </div>
          <div
            style="display: flex; justify-content: center; align-items: center"
          >
            <div
              style="
                width: 30px;
                height: 30px;
                line-height: 30px;
                text-align: center;
                border-radius: 4px;
                border: 1px solid #aaa;
                margin: 4px;
                background: #b31e8d;
              "
            ></div>
            <p style="margin: 0">: Checked</p>
          </div>
          <div
            style="
              display: flex;
              justify-content: center;
              align-items: center;
              margin-right: 13px;
            "
          >
            <div
              style="
                width: 30px;
                height: 30px;
                line-height: 30px;
                text-align: center;
                border-radius: 4px;
                border: 1px solid #60e360;
                margin: 4px;
                color: #333;
              "
            ></div>
            <p style="margin: 0">: Available</p>
          </div>
          <div
            style="display: flex; justify-content: center; align-items: center"
          >
            <div
              style="
                width: 30px;
                height: 30px;
                line-height: 30px;
                text-align: center;
                border-radius: 4px;
                border: 1px solid #e33333;
                margin: 4px;
                color: #333;
              "
            ></div>
            <p style="margin: 0">: Sold Out</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<p-toast></p-toast>
